define("tiny_translations/ui",["exports","tiny_translations/modal","core/modal_events","core/modal_factory","./options"],(function(_exports,_modal,_modal_events,_modal_factory,_options){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.handleAction=void 0,_modal=_interopRequireDefault(_modal),_modal_events=_interopRequireDefault(_modal_events),_modal_factory=_interopRequireDefault(_modal_factory);_exports.handleAction=function(editor){displayDialogue(editor)};var _ref,_ref2,getTemplateContext=function(editor,data){return Object.assign({},{elementid:editor.id},data)},displayDialogue=(_ref=_asyncToGenerator(regeneratorRuntime.mark((function _callee(editor){var data,modal,_args=arguments;return regeneratorRuntime.wrap((function(_context){for(;;)switch(_context.prev=_context.next){case 0:return data=_args.length>1&&void 0!==_args[1]?_args[1]:{},_context.next=3,_modal_factory.default.create({type:_modal.default.TYPE,templateContext:getTemplateContext(editor,data),large:!0});case 3:(modal=_context.sent).show(),modal.getRoot().on(_modal_events.default.save,(function(event,modal){handleOK(editor,modal,data)}));case 7:case"end":return _context.stop()}}),_callee)}))),function(_x){return _ref.apply(this,arguments)}),handleOK=(_ref2=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(editor,modal,data){return regeneratorRuntime.wrap((function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:replaceHash(editor,modal,data);case 1:case"end":return _context2.stop()}}),_callee2)}))),function(_x2,_x3,_x4){return _ref2.apply(this,arguments)}),replaceHash=function(editor,modal,data){var translationhash,initialcontent=editor.getContent();initialcontent=(initialcontent=initialcontent.replaceAll(/<p><span name="translationhash" data-translationhash[ ]*=[ ]*[\'"]+([a-zA-Z0-9]+)[\'"]+[ ]*>[ ]*<\/span><\/p>/g,"")).replaceAll(/<span name="translationhash" data-translationhash[ ]*=[ ]*[\'"]+([a-zA-Z0-9]+)[\'"]+[ ]*>[ ]*<\/span>/g,""),translationhash='<p><span name="translationhash" data-translationhash="'+(0,_options.getUnusedHash)(editor)+'"></span></p>',editor.setContent(initialcontent+translationhash)}}));

//# sourceMappingURL=ui.min.js.map