define("tiny_translations/commands",["exports","editor_tiny/utils","core/str","./ui","./common","./options"],(function(_exports,_utils,_str,_ui,_common,_options){Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.getSetup=void 0;_exports.getSetup=async()=>{const[buttonText,buttonImage]=await Promise.all([(0,_str.get_string)("buttontitle",_common.component),(0,_utils.getButtonImage)("icon",_common.component)]);return editor=>{if(editor.ui.registry.addIcon(_common.icon,buttonImage.html),editor.ui.registry.addToggleButton(_common.buttonName,{icon:_common.icon,tooltip:buttonText,onAction:()=>(0,_ui.handleAction)(editor)}),"id_substitutetext_editor"===editor.getElement().id)return;let translationHashElement;editor.on("init",(()=>{const newTranslationHash=(0,_options.getUnusedHash)(editor);if(newTranslationHash)if(translationHashElement=editor.getBody().querySelector("[data-translationhash]"),translationHashElement){if(!translationHashElement.parentElement.classList.contains("translationhash")){let translationHashElementCopy=translationHashElement,parentBlock=document.createElement("p");parentBlock.setAttribute("class","translationhash"),translationHashElement.remove(),parentBlock.appendChild(translationHashElementCopy),editor.getBody().prepend(parentBlock)}}else{translationHashElement=document.createElement("span"),translationHashElement.dataset.translationhash=newTranslationHash;let parentBlock=document.createElement("p");parentBlock.setAttribute("class","translationhash"),parentBlock.appendChild(translationHashElement),editor.getBody().prepend(parentBlock)}})),editor.on("submit",(()=>{editor.getContent()===translationHashElement.outerHTML&&editor.setContent("")}))}}}));

//# sourceMappingURL=commands.min.js.map